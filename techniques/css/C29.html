<!DOCTYPE html>
<html lang="ja">
   <head>
      <meta charset="UTF-8" />
      <title>C29: 適合している代替版を提供するために、スタイルスイッチャーを使用する</title>
      <link rel="stylesheet" type="text/css" href="https://www.w3.org/StyleSheets/TR/2016/base" />
      <link rel="stylesheet" type="text/css" href="../techniques.css" />
      <link rel="stylesheet" type="text/css" href="../slicenav.css" />
   </head>
   <body>
      <nav>
         <ul id="navigation">
            <li><a href="../#techniques" title="Table of Contents">目次</a></li>
            <li><a href="../#introduction" title="Introduction to Techniques">イントロダクション</a></li>
            <li><a href="C28">前の達成方法: C28</a></li>
            <li><a href="C30">次の達成方法: C30</a></li>
         </ul>
      </nav>
      <nav class="navtoc">
         <p>このページのコンテンツ:</p>
         <ul id="navbar">
            <li><a href="#important-information">達成方法に関する重要な情報</a></li>
            <li><a href="#applicability">適用 (対象)</a></li>
            <li><a href="#description">解説</a></li>
            <li><a href="#examples">事例</a></li>
            <li><a href="#resources">参考リソース</a></li>
            <li><a href="#related">関連する達成方法</a></li>
            <li><a href="#tests">検証</a></li>
         </ul>
      </nav>
      <h1>適合している代替版を提供するために、スタイルスイッチャーを使用する</h1>
      <section id="important-information">
         <h2>達成方法に関する重要な情報</h2>
         <p>この達成方法 (参考) の使用法と、この達成方法が WCAG 2.1 達成基準 (規定) とどのように関係するのかに関する重要な情報については、<a href="https://waic.jp/translations/WCAG21/Understanding/understanding-techniques">WCAG 達成基準の達成方法を理解する</a>を参照のこと。適用 (対象) のセクションは、その達成方法の範囲について説明しており、特定の技術に関する達成方法の存在は、その技術があらゆる状況で WCAG 2.1 を満たすコンテンツを作成するために使用できることを意味するものではない。
         </p>
      </section>
      <main>
         <section id="applicability">
            <h2>適用 (対象)</h2>
            <p>クライアントサイド又はサーバーサイドのスクリプトとともに使用される CSS</p>
            <p>この達成方法は、解説書から参照されていない。</p>
         </section>
         <section id="description">
            <h2>解説</h2>
            <p>ウェブページのデフォルトの提示が部分的に達成基準を満たさない場合、「適合要件」の条項 (適合要件 1) にある「代替版」を用意することで必要条件を満たすことができる。必要条件によっては、ページのあらゆる側面が主張したレベルに適合するように提示を調整できるリンク又はコントロールによってスタイルスイッチャーを呼び出すことで、コンテンツ制作者が同じ情報の複数バージョンの提供を避けることを可能にする。
            </p>
            <p>この達成方法の目的は、ウェブページの適合している代替版を提供するために、スクリプトと組み合わせて CSS を使う方法を示すことである。この達成方法では、コンテンツの提示を制御するために使用されている CSS を変更するコントロールを提供することで、コンテンツ制作者はコンテンツの代替表示を提供する。ウェブページ内で提供されるコントロールは、そのレベルで要求される達成基準を満たすことができるような提示方法を利用者が選択及び変更することを可能にする。これによって、以下のような状況において、利用者が異なる提示方法を選択できるようになる:
            </p>
            <ul>
               
               <li>パソコンの知識や権限がないことが原因で、利用者はブラウザや OS の設定を調整できないかもしれない 
               </li>
               
               <li>テキストが、ブラウザや OS の設定では対処できない方法で提供されている (テキストが画像の中に書き込まれているなど) 
               </li>
               
               <li>コンテンツのデフォルトの提示では、一部の利用者に対して十分なコントラストがない 
               </li>
               
            </ul>
            <p>この達成方法で達成させるには、以下の 3 項目を満たしていなければならない。</p>
            <ol>
               
               <li>オリジナルのページのリンク又はコントロール自身は、代替の提示を通して達成基準を満たしていなければならない。例えば、スタイルスイッチャーが大きなフォントサイズを提供するために使用され、かつそのコントロールが小さいフォントを用いて提示される場合、利用者はそのコントロールを作動させてその代替の提示を見ることができないかもしれない。 
               </li>
               
               <li>新しいページは、オリジナルのページと同じすべての情報と機能を含んでいなければならない。 
               </li>
               
               <li>新しいページは、希望する適合レベルのすべての達成基準に適合しなければならない。たとえば、ひとつの要求は満たすが、それを使うと別の要求に適合しなくなってしまうような代替スタイルシートは使用できない。 
               </li>
               
            </ol>
            <p>スタイルスイッチャーを使う場合は、以下の課題と制限について検討することが重要である: 
            </p>
            <ul>
               
               <li>利用者が行うことのできる変更の数や形式は、ウェブページのコンテンツ制作者によって制御される範囲に限定される。できる限り多くの利用者のニーズに対応できるようにするために、さまざまな提示と設定項目が提供されるべきである。しかしながら、コンテンツ制作者は、利用者に多くのオプションを提供することに起因する、利用者にとっての設定可能な項目と複雑さの相互作用について熟考することも重要である。
               </li>
               
               <li>あるページから別のページに移動しても利用者の設定を保持しておくには、利用者の機器にクッキーで保存したり (詳細はリソースのセクションを参照)、ウェブサーバーに保存されるプロファイルにクエリー文字列として渡して格納するなどの方法で実現できる場合がある。 
               </li>
               
               <li>スタイルスイッチャーを実装するための技術的手法は、利用者の環境においていくつかの技術が利用可能であることを前提としている (たとえば、多くのクライアントサイドソリューションは、JavaScript と CSS の両方が利用可能であることを必要とする)。これらのウェブコンテンツ技術が適合のために当てにできる場合を除き、クライアントサイドのサポートとウェブコンテンツ技術の利用可能性が保証されない場合には、コンテンツ制作者はサーバーサイドのウェブコンテンツ技術を使うことを検討すべきである。その代案としては、これらのウェブコンテンツ技術のサポートを適合のために当てにできない場合に、使用されているいくつかのウェブコンテンツ技術が有効でなくてもコンテンツが確実に適切な表現に変換されるような達成方法を使うことが、より良いページにするための効果的な方法となる。
               </li>
               
            </ul>
         </section>
         <section id="examples">
            <h2>事例</h2>
            <section class="example" id="example-1-using-a-javascript-control-to-apply-a-different-external-css-file-">
               <h3>例 1: 異なる外部スタイルシートファイルを適用するために JavaScript のコントロールを使う</h3>
               <p>この例では、文字色と背景色を変更するリンクを JavaScript で提供する。そのリンクは、利用者の環境で JavaScript がサポートされており、かつ有効な場合にのみ挿入されるようにすべきである。これは、そのリンク自身を挿入するためにスクリプトを使う (つまり JavaScript がサポートされており、かつ有効な場合にのみリンクが表示される) ことで実現できる。 
               </p>
               <p>以下のコードは、JavaScript に依存した色を変更するリンク並びに、ウェブページのコンテンツの一部、関連するスタイルシート規則、及び色を変更するリンクが選択されたときに使われるスタイルシートを変更する JavaScript を示している。 
               </p>
               <p>この例は、現在のページの表示だけに適用される。実稼働環境では、利用者がそのサイトで一度選択すれば済むように、その設定をクッキーまたはサーバーサイドのユーザプロファイルに保存することが望ましい。
               </p>
               <p>XHTML (抜粋):</p><pre xml:space="preserve">
In &lt;head&gt; section:

  &lt;link href="main.css" rel="stylesheet" type="text/css" /&gt;
  &lt;link id="currentCSS" href="defaultColors.css" rel="stylesheet" type="text/css" /&gt;

In &lt;body&gt; section:

&lt;div id="colorswitch"&gt;
&lt;p&gt;Change colors:&lt;/p&gt;
  &lt;ul class="inline"&gt;
    &lt;li&gt;&lt;a href="#" onClick="javascript:changeColors('altColors1.css');return false;" 
      id="altColors1"&gt;dark blue on white&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="#" onClick="javascript:changeColors('altColors2.css');return false;" 
      id="altColors2"&gt;yellow on black&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="#" onClick="javascript:changeColors('altColors3.css');return false;" 
      id="altColors3"&gt;black on pale yellow&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="#" onClick="javascript:changeColors('altColors4.css');return false;" 
      id="altColors4"&gt;black on white&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="#" onClick="javascript:changeColors('defaultColors.css');return false;" 
      id="default"&gt;Reset to default&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
&lt;div id="mainbody"&gt;
  &lt;h1&gt;Conference report&lt;/h1&gt;
  &lt;p&gt;Last week's conference presented an impressive line-up of speakers...&lt;/p&gt;
&lt;/div&gt;

</pre><p>CSS (抜粋):</p><pre xml:space="preserve">
In main.css:

body{ font-family: Geneva, Arial, Helvetica, sans-serif; margin: 2em; }

#mainbody { 
    padding: 1em; 
}

#colorswitch {
    float: right; 
    width: 12em; 
    border: 1px #000066 solid; 
    padding:0 1em 1em 1em; margin:0;
}

#colorswitch p { 
    padding-top:.5em; 
    font-weight:bold;
}

In defaultColors.css:

body, p { 
    color:#000000; 
    background-color:#FFFFFF; 
}

h1, h2, h3 {
        color:#990000; 
        background-color:#FFFFFF;
}

In altColors1.css:

body, h1, h2, h3, p, a { 
    color:#000066; 
    background-color:#FFFFFF; 
}

In altColors2.css:

body, h1, h2, h3, p, a { 
    color:#FFFF33; 
       background-color:#000000; 
}

In altColors3.css:

body, h1, h2, h3, p, a { 
    color:#000000; 
    background-color:#FFFF99; 
}

In altColors4.css:

body, h1, h2, h3, p, a { 
    color:#000000; 
    background-color:#FFFFFF; 
}
  </pre><p>JavaScript (抜粋):</p><pre xml:space="preserve">
function changeColors (newCSS)
{
  document.getElementById('currentCSS').href = newCSS; 
}
</pre><p class="working-example">このコードの実装サンプル: <a href="https://www.w3.org/WAI/WCAG21/working-examples/script-swap-css/">異なる外部スタイルシートファイルを適用するために JavaScript のコントロールを使う</a>
               </p>
            </section>
            <section class="example" id="example-2-using-a-client-side-javascript-to-change-a-css-property-">
               <h3>例 2: CSS プロパティを変更するためにクライアントサイドの JavaScript を使用する</h3>
               <p>この例はコンテンツの一部分を単純に変更するもので、複雑なサイトやページに対してはあまり実用的なものではないかもしれない。この例では、特定のコンテンツを強調表示するための背景として (あらかじめ用意された選択肢から) 利用者が選択した色を反映させるために、クラス名を変更する目的でクライアントサイドの JavaScript を使用している。 
               </p>
               <div class="note">
                  <div role="heading" class="note-title marker" aria-level="4">注記</div>
                  <div>
                     
                     <p>以下のコードには、達成方法を理解しやすくする目的で、XHTML コード内から JavaScript を呼び出す部分が含まれている。しかし、コンテンツ制作者は、JavaScript を組み込むためのその時点でのベストプラクティスを採用することが推奨される (控えめな JavaScript とプログレッシブエンハンスメントについての詳細はリソースを参照)。 
                     </p>
                     
                  </div>
               </div>
               <p>XHTML (抜粋):</p><pre xml:space="preserve">
&lt;h1&gt;Product comparison&lt;/h1&gt;
&lt;p&gt;The products you selected to compare are listed below. 
Any differences between the products are highlighted and italicized.&lt;/p&gt;
&lt;p class="inlinePara"&gt;Change hightlight color: &lt;/p&gt;
&lt;ul class="inline"&gt;
  &lt;li&gt;&lt;a href="#" onClick="changeColor('hghltLightYellow');return false;" 
    class="hghltLightYellow"&gt;light yellow&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" onClick="changeColor('hghltBrightYellow');return false;" 
    class="hghltBrightYellow"&gt;bright yellow&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" onClick="changeColor('hghltLightBlue');return false;" 
    class="hghltLightBlue"&gt;light blue&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" onClick="changeColor('hghltBrightBlue');return false;" 
    class="hghltBrightBlue"&gt;bright blue&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" onClick="changeColor('hghltLightRed');return false;" 
    class="hghltLightRed"&gt;light red&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" onClick="changeColor('hghltDrkRed');return false;" 
    class="hghltDrkRed"&gt;dark red&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;table width="400" border="1"&gt;
  &lt;tr&gt;
    &lt;td&gt; &lt;/td&gt;
    &lt;th scope="col"&gt;Product 1&lt;/th&gt;
    &lt;th scope="col"&gt;Product 2&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;th scope="row"&gt;Aspect 1&lt;/th&gt;
    &lt;td&gt;Yes&lt;/td&gt;
    &lt;td&gt;Yes&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;th scope="row"&gt;Aspect 2&lt;/th&gt;
    &lt;td class="hghltLightYellow"&gt;Yes&lt;/td&gt;
    &lt;td class="hghltLightYellow"&gt;No&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;th scope="row"&gt;Aspect 3&lt;/th&gt;
    &lt;td&gt;Yes&lt;/td&gt;
    &lt;td&gt;Yes&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</pre><p>CSS (抜粋):</p><pre xml:space="preserve">
body { color:#000000; background-color:#FFFFFF; }

.hghltLightYellow { color: #000000; background-color: #FFFF99; font-style:oblique; }
.hghltBrightYellow { color: #000000; background-color: #FFFF00; font-style:oblique; }
.hghltLightBlue { color: #000000; background-color: #33FFFF; font-style:oblique; }
.hghltBrightBlue { color: #FFFFFF; background-color: #0000FF; font-style:oblique; }
.hghltLightRed { color: #000000; background-color: #FF6266; font-style:oblique; }
.hghltDrkRed { color: #FFFFFF; background-color: #993300; font-style:oblique; }

.inlinePara {display:inline; }
.inline {display: inline; margin-left:0px; padding-left:0px; line-height:3em; }
.inline li { display:inline; }
.inline li a {padding: 0.5em 1em; border: 2px solid #000000; }

</pre><p>JavaScript (抜粋):</p><pre xml:space="preserve">
function changeColor(hghltColor)
{
  // collects table data cells into an array
 
 var els = document.getElementsByTagName('td');

  // for each item in the array, look for a class name starting with "hghlt"
  // if found, change the class value to the current selection
  // note that this script assumes the  'td' class attribute is only used for highlighting

  for (var i=0; i&lt;els.length; i++)
  {
    if (els[i].className.indexOf("hghlt") == 0) { els[i].className = hghltColor; }
  }
}

</pre><p class="working-example">このコードの実装サンプル: <a href="https://www.w3.org/WAI/WCAG21/working-examples/script-change-css-property/">CSS プロパティを変更するためにクライアント JavaScript を使う</a>
               </p>
            </section>
            <section class="example" id="example-3-using-php-$_get-to-apply-a-different-external-css-file-">
               <h3>例 3: 異なる外部スタイルシートファイルを適用するために PHP の $_GET を使う</h3>
               <p>このシンプルな例では、二つあるうちの一つの外部スタイルシートを割り当てるために PHP の $_GET を使用している。同様のことは、PHP の様々な機能を使って実現できる。この例では、現在のページの表示だけに適用される。実際の制作においては、利用者がそのサイトにおいて一度選択すれば済むように、設定をクッキーまたはサーバーサイドのユーザプロファイルに保存することが望ましい。
               </p>
               <p>以下のコードは PHP であるが、同様のアプローチは様々なサーバーサイドのウェブコンテンツ技術によって可能である。
               </p>
               <p>PHP 及び XHTML (抜粋): </p><pre xml:space="preserve">
At the beginning of the PHP page:

&lt;?php
$thestyle = $_GET['set'];
if ($thestyle == "style1")
	{
	$thestyle = "style2";
	}
else
	{
	$thestyle = "style1";
	}
?&gt;

In the &lt;head&gt; section:

   &lt;link rel="stylesheet" type="text/css" media="screen" href="&lt;?php echo($thestyle);?&gt;.css" &gt;

In &lt;body&gt; section:

&lt;?php
if ($thestyle == "style1") {
	echo "&lt;a href=\"index.php?set=style1\"&gt;Switch to Style Sheet Two&lt;/a&gt;";
	}
else {
	echo "&lt;a href=\"index.php?set=style2\"&gt;Switch to Style Sheet One&lt;/a&gt;";
	}
?&gt;

&lt;div id="mainbody"&gt;
  &lt;h1&gt;Conference report&lt;/h1&gt;
  &lt;p&gt;Last week's conference presented an impressive line-up of speakers...&lt;/p&gt;
&lt;/div&gt;

</pre><p>CSS (抜粋): </p><pre xml:space="preserve">
In style1.css:

  body, p { color:#000000; background-color:#FFFFFF; }
  h1, h2, h3 {color:#990000; background-color:#FFFFFF; }

In style2.css:

  body, h1, h2, h3, p, a { color:#FFFF00; background-color:#000000; }

</pre><p class="working-example">このコードの実装サンプル: <a href="https://www.w3.org/WAI/WCAG21/working-examples/uri-parameter-choose-stylesheet/">異なる外部スタイルシートファイルを適用するために PHP の $_GET を使う</a>
               </p>
            </section>
            <section class="example" id="example-4-using-jsp-to-provide-an-alternative-style-sheet-">
               <h3>例 4: 代替スタイルシートを提供するために JSP を使用する</h3>
               <p>以下の例では二つのファイルを使用している:</p>
               <ul>
                  
                  <li>フォームを含む Java Server Page (JSP) 及びフォームの処理コード</li>
                  
                  <li>上記ページ及び同様のスタイルを使用する他のページで使用される関数を含むインクルードファイル 
                  </li>
                  
               </ul>
               <p>サーバーサイドのコードは、利用者が選択したスタイルシートのための通常の link 要素及び他のスタイル用の「alternate stylesheet」のついた link 要素を出力する。そのコードは、二つめの例にあるように、クライアントサイドのコードのフォールバックとして使用することもできる。 
               </p>
               <p>フォームを含む JSP ページ: </p><pre xml:space="preserve">
 &lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"
 %&gt;&lt;%@include file="_jsp/styleswitch.jsp"%&gt;&lt;?xml version="1.0" encoding="UTF-8"?&gt;
 &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
   "https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
 &lt;html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"&gt;
 &lt;head&gt;
   &lt;meta content="text/html; charset=utf-8" http-equiv="Content-Type" /&gt;
   &lt;title&gt;Change Style&lt;/title&gt;
   &lt;%
     String fStyle = "";
     String styleName = "style";
     String defaultStyle = "default";
     Cookie[] cookies = request.getCookies();
 
     // get style from post request parameters
     if (request.getMethod().equals("POST") &amp;&amp; request.getParameter("styleSelect") != null) {
       fStyle = request.getParameter("styleSelect");
       // code that validates user input (security) not shown
       
       if (fStyle.equals("nostyle")) { // user prefers no author style
       } else { // user requests author style
         out.println(createStyleLinks(fStyle).toString());
       }
       
       storeStylePreferenceCookie(request, response, fStyle);
     } else if (request.getMethod().equals("GET")) { 
     // GET request; get style from cookie; else default style links
       // get style from cookie
       if (cookies != null) {
         // get style from cookies
         fStyle = getStyleFromCookies(cookies);
 
         if ( !fStyle.equals("NULL_STYLE") ) { // user requests author style
             out.println(createStyleLinks(fStyle).toString());
         } else { // no cookie for style; process request for style preference
           // default style links
           out.println(createStyleLinks(defaultStyle).toString());
         }
       } else { // GET request without cookies: default styles
         out.println(createStyleLinks(defaultStyle).toString());
       }//end else cookies
     }
   %&gt;
 &lt;/head&gt;
 &lt;body id="home"&gt;
   &lt;form action="_styleSwitch.jsp" method="post" id="styleswitchform" name="styleswitchform"&gt;
     &lt;p&gt;&lt;label for="styleSelect"&gt;Select style: &lt;/label&gt;
       &lt;select id="styleSelect" name="styleSelect"&gt;
         &lt;option value="default"&gt;Default (shades of green)&lt;/option&gt;
         &lt;option value="wonb"&gt;White on black&lt;/option&gt;
         &lt;option value="bonw"&gt;Black on white&lt;/option&gt;
       &lt;/select&gt;
       &lt;input type="submit" value="Change Style" /&gt;
     &lt;/p&gt;
   &lt;/form&gt;
 &lt;/body&gt;
 &lt;/html&gt;
 </pre><p>上記ファイルにインクルードされる「styleswitcher.jsp」ファイル: </p><pre xml:space="preserve">
 &lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
 &lt;%!
   /**
    * Get the links (link elements) to the CSS files based on cookies, ...
   */
   private String getStyleLinks(HttpServletRequest request) {
     String styleLinks = "";
     Cookie[] cookies = request.getCookies();
     String defaultStyle = "default";
     String tempStyle = "";
     // GET request; get style from cookie; else default style links
     // get style from cookie
     if (cookies != null) {
       // get style from cookies
       tempStyle = getStyleFromCookies(cookies);
 
       if ( tempStyle.equals("NULL_STYLE") ) { 
         // no cookie for style; process request for style preference
         // default style links
         styleLinks = createStyleLinks(defaultStyle).toString();
       } else { // user requests author style
         styleLinks = createStyleLinks(tempStyle).toString();
       }
     } else { // GET request without cookies: default styles
       styleLinks = createStyleLinks(defaultStyle).toString();
     }//end else cookies
     
     return styleLinks;
   }
 
   /**
    * Get style cookie from request
   */
   private String getStyleFromCookies( Cookie[] cookies ) {
     String fStyle = "NULL_STYLE";
     for (int i = 0; i &lt; cookies.length; i++) {
       Cookie cookie = cookies[i];
       String name = cookie.getName();
       
       if ( name.equals("style") ) {
         fStyle = cookie.getValue();
         // code that validates cookie value (security) not shown
       }
     }
     return fStyle;
   }
 
   /**
    * Store the style preference in a persistent cookie
   */
   private void storeStylePreferenceCookie(HttpServletRequest request, 
     HttpServletResponse response, String theStyle) {
     final int ONE_YEAR = 60 * 60 * 24 * 365;
     Cookie styleCookie = new Cookie("style", theStyle);
     styleCookie.setMaxAge(ONE_YEAR);
     response.addCookie(styleCookie);
   }
 
   /**
    * Create the link elements for the stylesheets
   */
   private StringBuffer createStyleLinks(String prefStyle) {
     StringBuffer theStyleLinks = new StringBuffer();
     //two-dimensional array with identifiers (adding '.css' gives the name of the CSS file) 
     // and strings for the title attribute of the link element
    // the identifiers must correspond to the in the "value" attributes in the "option"
    // elements in the style switcher form
     String [] [] styles = {
       { "default", "Default style"},
       { "wonb", "White on black"},
       { "bonw", "Black on white"}
     };
 
     // loop over 2dim array: if styles[i][1] matches prefStyle, 
     // output as normal, else as alternate stylesheet
     for (int i = 0; i &lt; styles.length; i++) {
       if ( styles[i][0].equals(prefStyle) ) { // output pref stylesheet as normal stylesheet
         theStyleLinks.append("&lt;link rel=\"stylesheet\" href=\"_css/").append(styles[i][0])
           .append(".css\" title=\"").append(styles[i][1]).append("\" type=\"text/css\" /&gt;").append("\n");
       } else { // output other stylesheets as alternate stylesheets
         theStyleLinks.append("&lt;link rel=\"alternate stylesheet\" href=\"_css/")
           .append(styles[i][0]).append(".css\" title=\"").append(styles[i][1])
           .append("\" type=\"text/css\" /&gt;").append("\n");
       }
     } // end for loop
 
     return theStyleLinks;
   }
 %&gt;
 </pre><p>他の JSP ページは、以下のコード (include / scriptlet) を用いてこのコードを使用できる:
               </p><pre xml:space="preserve">
 &lt;%@include file="_jsp/styleswitch.jsp"%&gt;&lt;% out.println(getStyleLinks(request)); %&gt;
 </pre></section>
         </section>
         <section id="resources">
            <h2>参考リソース</h2>
            <p>参考リソースは、あくまでも情報提供のみが目的であり、推薦などを意味するものではない。</p>
            <ul>
               
               <li>
                  <a href="http://www.456bereastreet.com/archive/200608/build_your_own_php_style_sheet_switcher/">Build your own PHP style sheet switcher</a>
                  
               </li>
               
            </ul>
            <section id="using-cookies">
               
               <h3>クッキーを使用する</h3>
               
               <p>クッキーを通して利用者のコンピュータ上に情報を保管することによって、利用者による設定はページ全体に渡って永続的に保存しておくことができる。この機能を利用するには、利用者のコンピュータでクッキーがサポートされており、かつその利用が許可されている必要がある。クッキーは、Javascript のようなクライアントサイドのスクリプト、または CGI スクリプトのようなサーバーサイドのスクリプトを使用することで、作成、読み込み、変更、及び削除することができる。クライアントサイドの実装に依存するということは、クッキーがサポートされその利用が許可されていることに加えて、利用者のコンピュータでその達成方法がサポートされており、かつ利用可能であることを要求することになる。 
               </p>
               
               <p>クッキーの生成と使用方法に関する情報はウェブ上にある。以下にいくつかの参考となるページを示す:
                  
               </p>
               
               <ul>
                  
                  <li>
                     <a href="http://www.quirksmode.org/js/cookies.html">JavaScript - Cookies</a>
                     
                  </li>
                  
                  <li>
                     <a href="http://webdesign.about.com/od/cookies/a/aa083198.htm">Write Your First HTTP Cookie</a>
                     
                  </li>
                  
                  <li>
                     <a href="http://www.w3schools.com/ASP/asp_cookies.asp">ASP Cookies</a>
                     
                  </li>
                  
                  <li>
                     <a href="http://ruby-doc.com/docs/ProgrammingRuby/">Programming Ruby</a>
                     
                  </li>
                  
               </ul>
               
               <p>コンテンツ制作者はクッキーをサポートしているかどうかのテストを行い、もしサポートされていなければ別のコントロールを提供することが推奨される。この別のコントロールには、「この設定をすべてのページに適用する」のような設定の有効化に関する情報が含まれるべきである。メッセージや別のコントロールの設定に応じて利用者に向けて表示されるページは、クッキーの動作環境とそれ以外の環境で利用できるオプションについての情報を提供する。 利用者がクッキーを有効にできない状況において、もし利用者がサイトの閲覧を継続することを選択した場合、それはどうなることを意味するのかということについての説明を含める。そしてクッキーをサポートしている場合と同様の結果を得るにはユーザエージェントをどう設定すればよいかということについての情報を提供する。
               </p>
               
               <p>例:「このブラウザはクッキーを受け付ける設定になっていません。このサイトでは、サイト内の全ページに渡って、あなたの変更した設定を適用するためにはクッキーが有効になっている必要があります。お使いの環境においてクッキーを有効にする方法については <a href="https://support.google.com/accounts/answer/61416?rd=1">How to Enable Cookies</a> を参照してください。ただし、これを実行するためには、お使いのコンピュータにおける管理者の権限が必要となる場合がありますので注意してください。クッキーが利用できない場合、あなたの設定はこのサイト内の他のページも含めて保存されません。弊社では、この機能をコンピュータの性能に関わらず提供できるよう努力しておりますが、それが実現できるまでの間でも、各ページにおいて設定を変更することは可能です。」
               </p>
               
            </section>
            <section id="progressive-enhancement-and-unobtrusive-javascript">
               
               <h3>プログレッシブエンハンスメントと控えめな JavaScript</h3>
               
               <p>HTML 又は XHTML ページにおける JavaScript 実装をするための現在のベストプラクティスは、構造及び提示からコンテンツの動作をある程度分離させて使用することである。「プログレッシブエンハンスメント」及び「控えめな JavaScript」という用語は、ページの機能を向上又改善するが、JavaScript がサポートされていない場合でもコンテンツが機能し続けられるように優雅に変換するスクリプトを表すのによく使用されている。
               </p>
               
               <p>より詳しく知るための推奨される情報: </p>
               
               <ul>
                  
                  <li>
                     <a href="http://alistapart.com/article/behavioralseparation">Behavioral Separation</a>
                     
                  </li>
                  
                  <li>
                     <a href="https://en.wikipedia.org/wiki/Unobtrusive_JavaScript">Wikipedia: Unobtrusive JavaScript</a>
                     
                  </li>
                  
                  <li>
                     <a href="http://javascript.about.com/library/blunobtrusive.htm">About.com: Unobtrusive JavaScript</a>
                     
                  </li>
                  
                  <li>
                     <a href="https://en.wikipedia.org/wiki/Progressive_enhancement">Progressive enhancement</a>
                     
                  </li>
                  
               </ul>
               
            </section>
         </section>
         <section id="related">
            <h2>関連する達成方法</h2>
            <ul>
               
               <li><a href="../general/G140">G140: 異なる提示を可能にするために、情報と構造を表現から分離する</a></li>
               
               <li><a href="../general/G174">G174: 利用者が十分なコントラストのある提示に切り替えられるように、十分なコントラスト比のあるコントロールを提供する</a></li>
               
               <li><a href="../general/G178">G178: 利用者がウェブページ上のすべてのテキストを 200％まで徐々に変更できるコントロールをウェブページ上で提供する</a></li>
               
               <li><a href="../general/G188">G188: 行間及び段落の間隔を広げるボタンをウェブページ上に提供する</a></li>
               
               <li><a href="../general/G189">G189: ウェブページの先頭近くに、リンクテキストを変更するコントロールを提供する</a></li>
               
               <li><a href="../general/G191">G191: 点滅するコンテンツのないページを再読み込みするリンク、ボタン、又はその他のメカニズムを提供する</a></li>
               
               <li><a href="../general/G206">G206: 利用者が横スクロールをしなくてもテキストの行を読めるようにするような、レイアウトを切り替えるオプションをコンテンツの中で提供する</a></li>
               
               <li><a href="C7">C7: リンクテキストの一部を非表示にするために、CSS を使用する</a></li>
               
               <li><a href="C22">C22: テキストの視覚的提示を制御するために、CSS を使用する</a></li>
               
               <li><a href="../client-side-script/SCR38">SCR38: プログレッシブエンハンスメントで設計されたウェブページに対して、適合している代替版を作成する</a></li>
               
            </ul>
         </section>
         <section id="tests">
            <h2>検証</h2>
            <section class="procedure" id="procedure">
               <h3>手順</h3>
               
               <ol>
                  
                  <li>利用者が代替となる提示を選択できるようなコントロールがウェブページに含まれていることを確認する。
                     
                  </li>
                  
                  <li>個々の CSS スタイルのプロパティを変更する、又は代替スタイルシートをアクティブにすることによって、コントロールが提示の変更していることを確認する。
                  </li>
                  
                  <li>結果として表示されたページは、元のページの適合している代替版であることを確認する。 
                  </li>
                  
               </ol>
               
            </section>
            <section class="results" id="expected-results">
               <h3>期待される結果</h3>
               
               <ul>
                  
                  <li>上記の全ての結果が真である。</li>
                  
               </ul>
               
            </section>
         </section>
      </main>
   </body>
</html>